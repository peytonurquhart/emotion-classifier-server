import flask
import flask_cors
import dlib
import face_recognition
import face_recognition_models
import joblib
import matplotlib
import numpy
import skimage
import sklearn
import scipy
import imageio

import base64
import io
from PIL import Image

from emotion_classifier import EmotionClassifier

st = "/9j/4AAQSkZJRgABAQAAAQABAAD/4gIoSUNDX1BST0ZJTEUAAQEAAAIYAAAAAAQwAABtbnRyUkdCIFhZWiAAAAAAAAAAAAAAAABhY3NwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAQAA9tYAAQAAAADTLQAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAlkZXNjAAAA8AAAAHRyWFlaAAABZAAAABRnWFlaAAABeAAAABRiWFlaAAABjAAAABRyVFJDAAABoAAAAChnVFJDAAABoAAAAChiVFJDAAABoAAAACh3dHB0AAAByAAAABRjcHJ0AAAB3AAAADxtbHVjAAAAAAAAAAEAAAAMZW5VUwAAAFgAAAAcAHMAUgBHAEIAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAFhZWiAAAAAAAABvogAAOPUAAAOQWFlaIAAAAAAAAGKZAAC3hQAAGNpYWVogAAAAAAAAJKAAAA+EAAC2z3BhcmEAAAAAAAQAAAACZmYAAPKnAAANWQAAE9AAAApbAAAAAAAAAABYWVogAAAAAAAA9tYAAQAAAADTLW1sdWMAAAAAAAAAAQAAAAxlblVTAAAAIAAAABwARwBvAG8AZwBsAGUAIABJAG4AYwAuACAAMgAwADEANv/bAEMAUDc8RjwyUEZBRlpVUF94yIJ4bm549a+5kcj////////////////////////////////////////////////////bAEMBVVpaeGl464KC6//////////////////////////////////////////////////////////////////////////AABEIAeACgAMBIgACEQEDEQH/xAAYAAEBAQEBAAAAAAAAAAAAAAAAAQIDBP/EACMQAQEBAQEBAAICAwADAAAAAAABEQIxIQNBElEiMmETcaH/xAAWAQEBAQAAAAAAAAAAAAAAAAAAAQL/xAAVEQEBAAAAAAAAAAAAAAAAAAAAAf/aAAwDAQACEQMRAD8A7AKACAAAAAAAACiKACAoICiAKgAAAAAAAAAjPXWL1XK36C2s1NS0C1KAIAAA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"

b64 = base64.b64decode(st)
buf = io.BytesIO(b64)
image = Image.open(buf)
image.show()

fr = face_recognition.load_image_file(buf)
renderable = Image.fromarray(fr)
renderable.show()